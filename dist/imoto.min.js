!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Imoto=t():e.Imoto=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=a.getEl,u=a.getEls,c=a.toArr,$=a.copyAttrs,f={};["pubsub","components","render","setStyle"].forEach(function(e){f[e]=n(3)("./"+e)});var d=function(){function e(t){var n=this;o(this,e);var r={},i=this.props,a=this.data,s=this.methods,u=this.template,c=this.styleSheet,$=this.created,d=this.ready,l=this.components;[i,a,s].forEach(function(e){if(e)for(var t in e)r[t]=e[t]}),this.$$directives=e.directives||{},t&&(this.$parent=t),this.$$pointers=r,this.$$styleSheet=c,$&&$.call(r),this.$$dom=document.createElement("div"),this.$$dom.innerHTML=u,this.$$dom.$$id=Math.random().toString(),this.$$components=l||{},this.$parent?this.$root=this.$parent.$root:this.$root=this,["pubsub","components","render","setStyle"].forEach(function(e){f[e](n)}),d&&d.call(r)}return i(e,[{key:"render",value:function(e){"string"==typeof e?s(e).appendChild(this.$$dom):(e.nextSibling?e.parentNode.insertBefore(this.$$dom,e.nextSibling):e.parentNode.appendChild(this.$$dom),$(this.$$dom,e),e.parentNode.removeChild(e))}},{key:"setComponent",value:function(e,t){var n=this;for(var r in this.$childs){var o=this.$childs[r];o.$$name===e&&(o.$$dom.parentNode.removeChild(o.$$dom),delete this.$childs[r])}var i=c(u(e,this.$$dom));i.forEach(function(r){var o=new t(n);o.$$name=e,n.$childs||(n.$childs={}),r.$$id=o.$$dom.$$id,n.$childs[o.$$dom.$$id]=o,o.render(r)})}}],[{key:"use",value:function(e){e.init(this)}},{key:"addDirective",value:function(e,t){this.directives?this.directives[e]=t:this.directives=r({},e,t)}}]),e}();e.exports=d},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(e){return Array.prototype.slice.call(e)};e.exports={getEl:function(e,t){return(t||document).querySelector(e)},getEls:function(e,t){return(t||document).querySelectorAll(e)},toArr:o,attrEls:function(e,t){var r={},i=function a(e){1===e.nodeType&&(o(e.attributes).forEach(function(o){var i=o.name,a=o.nodeValue,s=a.match(/{{(.*?)}}/g);if(s=s?s.map(function(e){return e.replace(/[ {}]/g,"")}):s,s&&-1!==s.indexOf(t)&&(o.$$temp=a,o.$$value=a,o.$$param=t,r.$reps?r.$reps.push(o):r.$reps=[o],o.nodeValue=a.replace("{{"+t+"}}","")),":for"===i){var u=a.split(" in ");2===u.length&&u[1]===t&&(r[i]?r[i].push(n({},u[0],e)):r[i]=[n({},u[0],e)],e.removeAttribute(i))}else if(0===i.indexOf(":")&&t===a)r[i]?r[i].push(e):r[i]=[e],e.removeAttribute(i);else if(0===i.indexOf("@")){var c=a.match(/\((.*)\)/);a===t||0===a.indexOf(t+"(")?(c=c?c[1]:"",r[i]?r[i].push({args:c,node:e}):r[i]=[{args:c,node:e}],e.removeAttribute(i)):c&&-1!==c[1].indexOf(t)&&(r[":bind"]?r[":bind"].push({value:t,node:e}):r[":bind"]=[{value:t,node:e}])}}),e.hasChildNodes()&&o(e.childNodes).forEach(a))};return i(e),r},copyAttrs:function(e,t){o(t.attributes).forEach(function(t){var n=t.name,r=t.nodeValue;e.setAttribute(n,r)})},extend:function(t,n){if(null===t||"object"!==("undefined"==typeof t?"undefined":r(t)))return t;if(t.constructor!==Object&&t.constructor!==Array)return t;if(t.constructor===Date||t.constructor===RegExp||t.constructor===Function||t.constructor===String||t.constructor===Number||t.constructor===Boolean)return new t.constructor(t);n=n||new t.constructor;for(var o in t)n[o]="undefined"==typeof n[o]?e.exports.extend(t[o],null):n[o];return n},getVal:function(e,t){},setVal:function(e,t,n){}}},function(e,t,n){function r(e){return n(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./components":4,"./components.js":4,"./pubsub":5,"./pubsub.js":5,"./render":6,"./render.js":6,"./setStyle":7,"./setStyle.js":7,"./tools":2,"./tools.js":2};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=3},function(e,t,n){"use strict";var r=n(2),o=r.getEls,i=r.toArr;e.exports=function(e){for(var t in e.components){var n=i(o(t,e.$$dom));n.forEach(function(n){var r=new e.components[t](e);r.$$name=t,e.$childs||(e.$childs={}),e.$childs[r.$$dom.$$id]=r,r.render(n)})}}},function(e,t){"use strict";e.exports=function(e){e.$on=function(e,t){},e.$emit=function(e){},e.$dispatch=function(e){},e.$broadcast=function(){}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(2),a=i.attrEls,s=i.extend;e.exports=function(e){var t=function(t,n,i,a){var c=function(e){return"object"===("undefined"==typeof e?"undefined":o(e))?(e=JSON.parse(JSON.stringify(e)),delete e.$$name,JSON.stringify(e)):e},$=function(t,o){if(0===o.indexOf("$"))0!==t.$$value.indexOf(t.$$param)&&(t.$$temp=t.$$value),t.$$value=t.$$temp.replace("{{"+t.$$param+"}}",c(n)),t.nodeValue=t.$$value;else if(0===o.indexOf("@")){if("function"!=typeof n)return console.error("Imoto Warning: should't set method as not a function");var $=function(){var r=t.args?t.args.split(",").map(function(e){return e.trim()}):[],o=r.length?r.map(function(e){return t.node.$$params[e]}):[];n.apply(e.$$pointers,o)},f=o.substr(1,o.length-1);t.node["$$"+f]&&t.node.removeEventListener(t.node["$$"+f]),t.node["$$"+f]=$,t.node.addEventListener(f,t.node["$$"+f])}else if(0===o.indexOf(":")){if("function"==typeof n)return console.error("Imoto Warning: should't set data or prop as a function");switch(o){case":text":t.innerText=c(n);break;case":html":t.innerHTML=c(n);break;case":value":t.value=c(n);break;case":for":for(var d in t)t[d].parentNode&&(t[d].$$parent=t[d].parentNode,t[d].$$parent.removeChild(t[d])),t[d].$$parent.$$forArr=t[d].$$parent.$$forArr||[],t[d].$$parent.$$forArr.forEach(function(e){t[d].$$parent.removeChild(e)}),t[d].$$parent.$$forArr=[],n.forEach(function(n,o){var i=t[d].cloneNode(!0);u(i,s(e.$$pointers,r({$index:o},d,n))),t[d].$$parent.$$forArr.push(i),t[d].$$parent.appendChild(i)});break;case":if":n&&t.$$next?setTimeout(function(){t.$$next?t.$$parent.insertBefore(t,t.$$next):t.$$parent.appendChild(t),delete t.$$parent,delete t.$$next}):(t.$$parent=t.parentNode,t.$$next=t.nextSibling,setTimeout(function(){t.parentNode.removeChild(t)}));break;case":show":t.style.display=c(n)?"block":"none";break;case":value.sync":break;case":bind":t.node.$$params||(t.node.$$params={}),t.node.$$params[t.value]=n;break;case":model":t.value=n,t.$$model||(t.$$model=function(e){i[a]=event.target.value},t.addEventListener("input",t.$$model.bind(e.$$pointers)));break;default:if(!e.$childs)return;var l=e.$childs[t.$$id];l&&(l.$$pointers[o.slice(1)]=n)}e.$$directives[o]&&e.$$directives[o](n,t)}};for(var f in t)t[f].forEach(function(e){$(e,f)})},n=function(e,n,r,o,i){var s=a(e,n);return t(s,r,o,i),s},i=function(e,n,r){var o=e[n];e[n]instanceof Function||Object.defineProperty(e,n,{set:function(e){o=e,t(r,e)},get:function(){return o}})},u=function c(e,t){if(t&&"object"===("undefined"==typeof t?"undefined":o(t))&&!t.length)for(var r in t){var a,s=t[r],u=s&&"object"===("undefined"==typeof s?"undefined":o(s));u?(s.$$name?s.$$name+="."+r:s.$$name=r,a=n(e,s.$$name,s,t,r),i(t,r,a),c(e,s)):(a=n(e,r,s,t,r),i(t,r,a))}};u(e.$$dom,e.$$pointers)}},function(e,t,n){"use strict";var r=n(2),o=r.getEl;e.exports=function(e){var t=o("style#i-style");t||(t=document.createElement("style"),t.id="i-style",document.head.appendChild(t)),e.$$styleSheet&&(t.innerHTML+=e.$$styleSheet)}}])});